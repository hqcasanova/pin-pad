(function(e){function t(t){for(var i,s,l=t[0],o=t[1],r=t[2],d=0,b=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&b.push(a[s][0]),a[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);u&&u(t);while(b.length)b.shift()();return c.push.apply(c,r||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],i=!0,l=1;l<n.length;l++){var o=n[l];0!==a[o]&&(i=!1)}i&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},a={app:0},c=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/pin-pad/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var r=0;r<l.length;r++)t(l[r]);var u=o;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0e6c":function(e,t,n){"use strict";n("c1cc")},2604:function(e,t,n){},"3b44":function(e,t,n){},"49ab":function(e,t,n){"use strict";n("2604")},"5c8f":function(e,t,n){"use strict";n("bb69")},"62ea":function(e,t,n){"use strict";n("988e")},7093:function(e,t,n){"use strict";n("eb9c")},8248:function(e,t,n){"use strict";n("3b44")},"988e":function(e,t,n){},bb69:function(e,t,n){},c1cc:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23"),a=(n("14d9"),{class:"pin-row"}),c=Object(i["h"])({__name:"PinRow",props:{pinLength:null,value:{default:""}},setup(e){var t=e,n=Object(i["b"])((function(){var e=[],n=0;for(n;n<t.pinLength;n++)e.push(n);return e}));return function(t,c){return Object(i["n"])(),Object(i["d"])("div",a,[(Object(i["n"])(!0),Object(i["d"])(i["a"],null,Object(i["t"])(Object(i["x"])(n),(function(n){return Object(i["u"])(t.$slots,"default",{key:n,pinPos:n,pinDigit:e.value[n]})})),128))])}}}),s=(n("49ab"),n("6b0d")),l=n.n(s);const o=l()(c,[["__scopeId","data-v-80ca0a3c"]]);var r=o,u=Object(i["h"])({__name:"BaseDigit",props:{value:{default:""},isVisible:{type:Boolean,default:!0},isDisabled:{type:Boolean,default:!1}},setup(e){var t=e,n=Object(i["b"])((function(){return t.value.length}));return function(t,a){return Object(i["n"])(),Object(i["d"])("span",{class:Object(i["k"])(["base-digit",{"base-digit--filled":Object(i["x"])(n)&&!e.isVisible,"base-digit--borderless":Object(i["x"])(n)&&e.isVisible,"base-digit--faded":e.isDisabled}])},Object(i["w"])(e.isVisible?e.value:""),3)}}});n("0e6c");const d=l()(u,[["__scopeId","data-v-6db8e2e1"]]);var b,p=d,f=n("5502"),O=(n("d3b7"),n("25f0"),n("4d90"),{code:"",failCount:-1,validLength:JSON.parse("4"),lockThreshold:JSON.parse("3"),lockTimeout:JSON.parse("10")});(function(e){e["PinUpdate"]="PIN_UPDATE",e["PinSuccess"]="PIN_SUCCESS",e["PinFail"]="PIN_FAIL",e["PinClear"]="PIN_CLEAR",e["PinReset"]="PIN_RESET"})(b||(b={}));var j,v={[b.PinUpdate](e,t){e.code=`${e.code}${t}`},[b.PinSuccess](e){e.failCount=0},[b.PinFail](e){-1===e.failCount?e.failCount=1:e.failCount++},[b.PinClear](e){e.code=""},[b.PinReset](e){e.code="",e.failCount=-1}},y=n("c7eb"),g=n("1da1"),h=JSON.parse("2000"),_="1234";function P(e){return new Promise((function(t,n){setTimeout(e===_?t:n,h)}))}(function(e){e["ValidatePin"]="VALIDATE_PIN",e["UpdatePin"]="UPDATE_PIN",e["ClearPin"]="CLEAR_PIN",e["ResetPin"]="RESET_PIN"})(j||(j={}));var k={[j.ValidatePin](e){return Object(g["a"])(Object(y["a"])().mark((function t(){var n,i;return Object(y["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,t.prev=1,t.next=4,P(n.code);case 4:i(b.PinSuccess),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),i(b.PinFail);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},[j.UpdatePin](e,t){var n=e.commit;n(b.PinUpdate,t.toString())},[j.ClearPin](e){var t=e.commit;t(b.PinClear)},[j.ResetPin](e){var t=e.commit;t(b.PinReset)}},m={isPinShort(e){return e.code.length<e.validLength},isFail(e){return e.failCount>0},isSuccess(e){return 0===e.failCount},isLockFailCount(e){return e.failCount>0&&e.failCount%e.lockThreshold===0},isLastAttempt(e){return e.failCount%e.lockThreshold===e.lockThreshold-1}},L=Object(f["a"])({plugins:[],state:O,mutations:v,actions:k,getters:m});function w(){return L}var C,I=Object(i["s"])(0);function S(e,t){t.value=e,C=window.setInterval((function(){t.value--,0===t.value&&(clearInterval(C),C=0)}),1e3)}var x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,n=Object(i["b"])((function(){return e.getters.isLockFailCount})),a=e.state.lockTimeout.toString().length;C=void 0;var c=Object(i["b"])((function(){return n.value&&t.value>0})),s=Object(i["b"])((function(){return t.value.toString().padStart(a,"0")})),l=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(i["y"])(n,(function(n){n&&!C&&S(e.state.lockTimeout,t)})),a&&Object(i["y"])(t,(function(t){0===t&&e.dispatch(j.ResetPin)}))};return{timerOnFailcount:l,unlockCountdown:Object(i["r"])(t),paddedCountdown:s,isPinLocked:c}},N=function(e){return Object(i["p"])("data-v-649b1450"),e=e(),Object(i["o"])(),e},T={class:"app-display"},E={class:"app-display__item app-display__title",test:"display-item title"},R={class:"app-display__status app-display__status--error"},V=N((function(){return Object(i["e"])("strong",{class:"app-display__status app-display__status--success"},"OK",-1)})),B={class:"app-display__item app-display__feedback",test:"display-item feedback"},A=Object(i["h"])({__name:"AppDisplay",props:{code:null,validLength:null,visibleFromLast:{default:JSON.parse("1")},isPinLocked:{type:Boolean,default:!1},isValidating:{type:Boolean,default:!1}},setup(e){var t=e,n=Object(f["b"])(),a=x(),c=a.paddedCountdown,s=Object(i["b"])((function(){return n.getters.isLastAttempt})),l=Object(i["b"])((function(){return n.getters.isFail})),o=Object(i["b"])((function(){return n.getters.isSuccess}));function u(e){return e>=t.code.length-(t.visibleFromLast||0)}return function(t,n){return Object(i["n"])(),Object(i["d"])("div",T,[Object(i["e"])("h2",E,[Object(i["x"])(l)?(Object(i["n"])(),Object(i["d"])(i["a"],{key:0},[Object(i["e"])("strong",R,Object(i["w"])(e.isPinLocked?"LOCKED":"ERROR"),1),Object(i["f"])(" "+Object(i["w"])(e.isPinLocked?"Keypad disabled":"Wrong PIN"),1)],64)):Object(i["x"])(o)?(Object(i["n"])(),Object(i["d"])(i["a"],{key:1},[V,Object(i["f"])(" PIN verified ")],64)):(Object(i["n"])(),Object(i["d"])(i["a"],{key:2},[Object(i["f"])(" Enter your PIN code ")],64))]),Object(i["e"])("p",B,[e.isValidating?(Object(i["n"])(),Object(i["d"])(i["a"],{key:0},[Object(i["f"])(" Checking... ")],64)):Object(i["x"])(l)&&!e.isPinLocked?(Object(i["n"])(),Object(i["d"])(i["a"],{key:1},[Object(i["f"])(Object(i["w"])(Object(i["x"])(s)?"Last try remaining":"Please try again"),1)],64)):Object(i["x"])(l)&&e.isPinLocked?(Object(i["n"])(),Object(i["d"])(i["a"],{key:2},[Object(i["f"])(" Please wait "+Object(i["w"])(Object(i["x"])(c))+" seconds ",1)],64)):Object(i["x"])(o)?(Object(i["n"])(),Object(i["d"])(i["a"],{key:3},[Object(i["f"])(" Your PIN is valid ")],64)):(Object(i["n"])(),Object(i["d"])(i["a"],{key:4},[Object(i["f"])(" The code must be "+Object(i["w"])(e.validLength)+" characters long ",1)],64))]),Object(i["g"])(r,{class:Object(i["k"])(["app-display__item app-display__pin",{"app-display__pin--error":Object(i["x"])(l)&&!e.isValidating,"app-display__pin--loading":e.isValidating||e.isPinLocked}]),test:"display-item pin","pin-length":e.validLength,value:e.code},{default:Object(i["z"])((function(e){return[Object(i["g"])(p,{"is-visible":u(e.pinPos),value:e.pinDigit},null,8,["is-visible","value"])]})),_:1},8,["class","pin-length","value"])])}}});n("62ea");const D=l()(A,[["__scopeId","data-v-649b1450"]]);var F=D,U=["onKeydown"],K=Object(i["h"])({__name:"BaseKey",props:{value:null,pressInterval:{default:100},isCancelHold:{type:Boolean,default:!1},isGlobalKeyHandler:{type:Boolean,default:!1}},emits:["key-pressed"],setup(e,t){var n=this,a=t.emit,c=e,s=Object(i["s"])(0),l=Object(i["s"])(null);function o(){s.value=window.setInterval((function(){c.isCancelHold?(clearInterval(s.value),s.value=0):a("key-pressed",c.value)}),c.pressInterval)}function r(){s.value?(clearInterval(s.value),s.value=0):a("key-pressed",c.value)}function u(e){var t,n;e.key!==c.value.toString()||null!==(t=l.value)&&void 0!==t&&t.disabled||(r(),null===(n=l.value)||void 0===n||n.focus())}return Object(i["l"])((function(){c.isGlobalKeyHandler&&document.addEventListener("keydown",u.bind(n))})),Object(i["m"])((function(){document.removeEventListener("keydown",u)})),function(t,n){var a=Object(i["v"])("touch");return Object(i["A"])((Object(i["n"])(),Object(i["d"])("button",{ref_key:"buttonEl",ref:l,class:"base-key",type:"button",onKeydown:Object(i["B"])(r,["enter","space"])},[Object(i["f"])(Object(i["w"])(e.value),1)],40,U)),[[a,o,"hold"],[a,r,"release"]])}}});n("5c8f");const J=l()(K,[["__scopeId","data-v-7f1efcfe"]]);var H=J,M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w(),t=Object(i["b"])((function(){return e.getters.isPinShort}));function n(n){t.value||e.dispatch(j.ClearPin),e.dispatch(j.UpdatePin,n)}return{pinUpdate:n}},$={class:"app-keypad"},q=Object(i["h"])({__name:"AppKeypad",props:{keyValues:{default:function(){return JSON.parse("[1, 2, 3, 4, 5, 6, 7, 8, 9, 0]")}},isDisabled:{type:Boolean,default:!1},isInputBlocked:{type:Boolean,default:!1}},setup(e){var t=M(),n=t.pinUpdate;return function(t,a){return Object(i["n"])(),Object(i["d"])("div",$,[(Object(i["n"])(!0),Object(i["d"])(i["a"],null,Object(i["t"])(e.keyValues,(function(t){return Object(i["n"])(),Object(i["d"])("div",{key:t,class:"app-keypad__item"},[Object(i["g"])(H,{class:"btn btn--primary",disabled:e.isDisabled,value:t,"is-cancel-hold":e.isInputBlocked,"is-global-key-handler":!0,onKeyPressed:a[0]||(a[0]=function(t){return!e.isInputBlocked&&Object(i["x"])(n)(t)})},null,8,["disabled","value","is-cancel-hold"])])})),128))])}}});n("7093");const G=l()(q,[["__scopeId","data-v-50df483c"]]);var z=G,W=Object(i["s"])(!1),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w(),t=Object(i["b"])((function(){return e.state.code.length})),n=function(){var t=e.dispatch(j.ValidatePin);W.value=!0,t.finally((function(){W.value=!1}))},a=function(){Object(i["y"])(t,(function(t){t===e.state.validLength&&n()}))};return{codeLength:t,validateOnLength:a,isValidating:Object(i["r"])(W)}},Q=Object(i["e"])("a",{class:"link link--primary source-link",rel:"external",target:"_blank",href:"https://github.com/hqcasanova/pin-pad"}," Source ",-1),X=Object(i["h"])({__name:"App",props:{isResetOnTimeout:{type:Boolean,default:!0}},setup(e){var t=e,n=Object(f["b"])(),a=Y(),c=a.validateOnLength,s=a.isValidating,l=x(),o=l.timerOnFailcount,r=l.isPinLocked,u=Object(i["b"])((function(){return n.state.code})),d=Object(i["b"])((function(){return n.state.validLength}));return c(),o(t.isResetOnTimeout),Object(i["l"])((function(){var e=document.querySelector(".app__container");null===e||void 0===e||e.classList.add("app__container--loaded")})),function(e,t){return Object(i["n"])(),Object(i["d"])(i["a"],null,[Object(i["g"])(F,{code:Object(i["x"])(u),"valid-length":Object(i["x"])(d),"is-pin-locked":Object(i["x"])(r),"is-validating":Object(i["x"])(s)},null,8,["code","valid-length","is-pin-locked","is-validating"]),Object(i["g"])(z,{"is-disabled":Object(i["x"])(r),"is-input-blocked":Object(i["x"])(s)},null,8,["is-disabled","is-input-blocked"]),Q],64)}}});n("8248");const Z=X;var ee=Z,te=n("9a7e");Object(i["c"])(ee).use(te["a"]).use(L).mount(".app__container"),L.subscribe((function(e,t){document.body.classList.toggle("app--success",0===t.failCount),document.body.classList.toggle("app--error",t.failCount>0)}))},eb9c:function(e,t,n){}});
//# sourceMappingURL=app.0dc2db00.js.map