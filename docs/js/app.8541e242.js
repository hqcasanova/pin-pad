(function(e){function t(t){for(var a,r,c=t[0],o=t[1],l=t[2],d=0,b=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&b.push(i[r][0]),i[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a]);u&&u(t);while(b.length)b.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,c=1;c<n.length;c++){var o=n[c];0!==i[o]&&(a=!1)}a&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},i={app:0},s=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=o;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"01d4":function(e,t,n){},"090f":function(e,t,n){"use strict";n("01d4")},"2c2e":function(e,t,n){},"2df1":function(e,t,n){},"3a7a":function(e,t,n){},"3d59":function(e,t,n){},4822:function(e,t,n){"use strict";n("2c2e")},"61df":function(e,t,n){},6980:function(e,t,n){"use strict";n("61df")},8630:function(e,t,n){"use strict";n("3a7a")},"9cba":function(e,t,n){"use strict";n("2df1")},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function i(e,t,n,i,s,r){var c=Object(a["s"])("display"),o=Object(a["s"])("keypad");return Object(a["l"])(),Object(a["e"])(a["a"],null,[Object(a["h"])(c,{class:"layout-item"}),Object(a["h"])(o,{class:"layout-item"})],64)}Object(a["n"])("data-v-2b6866dc");var s={class:"display-layout"},r={class:"display-title display-item"},c={class:"display-status error-text"},o=Object(a["f"])("strong",{class:"display-status success-text"},"OK",-1),l=Object(a["g"])(" PIN verified "),u=Object(a["g"])(" Enter your PIN code "),d={class:"display-feedback display-item"},b=Object(a["g"])("Checking..."),p=Object(a["g"])("Your PIN is valid");function f(e,t,n,i,f,O){var v=Object(a["s"])("pin-code");return Object(a["l"])(),Object(a["e"])("div",s,[Object(a["f"])("h2",r,[e.isFail?(Object(a["l"])(),Object(a["e"])(a["a"],{key:0},[Object(a["f"])("strong",c,Object(a["u"])(e.isPinLocked?"LOCKED":"ERROR"),1),Object(a["g"])(" "+Object(a["u"])(e.isPinLocked?"Keypad disabled":"Wrong PIN"),1)],64)):e.isSuccess?(Object(a["l"])(),Object(a["e"])(a["a"],{key:1},[o,l],64)):(Object(a["l"])(),Object(a["e"])(a["a"],{key:2},[u],64))]),Object(a["f"])("p",d,[e.isValidating?(Object(a["l"])(),Object(a["e"])(a["a"],{key:0},[b],64)):e.isFail&&!e.isPinLocked?(Object(a["l"])(),Object(a["e"])(a["a"],{key:1},[Object(a["g"])(Object(a["u"])(e.isLastAttempt?"Last try remaining":"Please try again"),1)],64)):e.isFail&&e.isPinLocked?(Object(a["l"])(),Object(a["e"])(a["a"],{key:2},[Object(a["g"])(" Please wait "+Object(a["u"])(e.paddedCountdown)+" seconds ",1)],64)):e.isSuccess?(Object(a["l"])(),Object(a["e"])(a["a"],{key:3},[p],64)):(Object(a["l"])(),Object(a["e"])(a["a"],{key:4},[Object(a["g"])("The code must be "+Object(a["u"])(e.maxLength)+" characters long",1)],64))]),Object(a["h"])(v,{class:Object(a["k"])(["display-pin display-item",{error:e.isFail&&!e.isValidating}]),reqLength:e.maxLength,visibleFromLast:e.pinShowLast,isLoading:e.isValidating,value:e.code},null,8,["class","reqLength","visibleFromLast","isLoading","value"])])}Object(a["m"])();var O=n("5530");n("a9e3");function v(e,t,n,i,s,r){var c=Object(a["s"])("pin-char");return Object(a["l"])(),Object(a["e"])("div",{class:Object(a["k"])(["pin-code",{loading:e.isLoading}])},[(Object(a["l"])(!0),Object(a["e"])(a["a"],null,Object(a["r"])(e.charPositions,(function(t){return Object(a["l"])(),Object(a["d"])(c,{key:t,isVisible:t>=e.value.length-e.visibleFromLast,value:e.value[t]},null,8,["isVisible","value"])})),128))],2)}var j=n("2909");n("d3b7"),n("ddb0");function y(e,t,n,i,s,r){return Object(a["l"])(),Object(a["e"])("span",{class:Object(a["k"])(["pin-char",{fill:e.isValue&&!e.isVisible,"hide-border":e.isValue&&e.isVisible,faded:e.isDisabled}])},Object(a["u"])(e.value),3)}var h=Object(a["i"])({name:"PinChar",props:{value:{type:String,default:""},isVisible:{type:Boolean,default:!0},isDisabled:{type:Boolean,default:!1}},computed:{isValue(){return this.value.length}}});n("090f");h.render=y,h.__scopeId="data-v-2e4951d4";var g=h,m=Object(a["i"])({name:"PinCode",components:{PinChar:g},props:{reqLength:{type:Number,required:!0},visibleFromLast:{type:Number,default:0},value:{type:String,default:""},isLoading:{type:Boolean,default:!1}},computed:{charPositions(){return Object(j["a"])(Array(this.reqLength).keys())}}});n("4822");m.render=v,m.__scopeId="data-v-b5f9fc26";var P,k=m,L=n("5502"),V={code:"",failCount:0,isValid:!1,maxLength:JSON.parse("4"),lockThreshold:JSON.parse("3"),lockTimeout:JSON.parse("30")};(function(e){e["PinUpdate"]="PIN_UPDATE",e["PinValid"]="PIN_VALID",e["PinFail"]="PIN_FAIL",e["PinReset"]="PIN_RESET"})(P||(P={}));var I,S={[P.PinUpdate](e,t){e.code=`${e.code}${t}`},[P.PinValid](e){e.isValid=!0,e.failCount=0},[P.PinFail](e){e.isValid=!1,e.failCount++},[P.PinReset](e){e.code=""}},w=n("1da1"),C=(n("96cf"),JSON.parse("2000")),_="1234";function N(e){return new Promise((function(t,n){setTimeout(e===_?t:n,C)}))}(function(e){e["ValidatePin"]="VALIDATE_PIN"})(I||(I={}));var K={[I.ValidatePin](e){return Object(w["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,a=e.commit,t.prev=1,t.next=4,N(n.code);case 4:return i=t.sent,a(P.PinValid),t.abrupt("return",i);case 9:t.prev=9,t.t0=t["catch"](1),a(P.PinFail);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},x={isPinShort(e){return e.code.length<e.maxLength},isLockFailCount(e){return e.failCount>0&&e.failCount%e.lockThreshold===0},isLastAttempt(e){return e.failCount%e.lockThreshold===e.lockThreshold-1}},F=Object(L["a"])({plugins:[],state:V,mutations:S,actions:K,getters:x});function R(){return F}var D,T=Object(a["q"])(!1),E=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=R(),i=Object(a["b"])((function(){return n.state.code.length}));return Object(a["v"])(i,(function(a){var i;e&&a===n.state.maxLength&&(T.value=!0,i=n.dispatch(I.ValidatePin),i.finally((function(){t&&n.commit(P.PinReset),T.value=!1})))})),{isFail:Object(a["b"])((function(){return n.state.failCount>0})),isSuccess:Object(a["b"])((function(){return n.state.isValid&&!n.state.failCount})),isValidating:Object(a["p"])(T)}},A=(n("25f0"),n("4d90"),Object(a["q"])(0));function B(e){A.value=e,D=setInterval((function(){A.value--,0===A.value&&(clearInterval(D),D=0)}),1e3)}var H=function(){var e=R(),t=Object(a["b"])((function(){return e.getters.isLockFailCount})),n=e.state.lockTimeout.toString().length,i=Object(a["b"])((function(){return t.value&&A.value>0})),s=Object(a["b"])((function(){return A.value.toString().padStart(n,"0")}));return Object(a["v"])(t,(function(t){t&&!D&&B(e.state.lockTimeout)})),{unlockCountdown:Object(a["p"])(A),paddedCountdown:s,isPinLocked:i}},q=Object(a["i"])({name:"Display",components:{PinCode:k},props:{pinShowLast:{type:Number,default:JSON.parse("1")},isValidateOnLength:{type:Boolean,default:!0},isResetOnValidation:{type:Boolean,default:!0}},computed:Object(O["a"])(Object(O["a"])({},Object(L["c"])(["code","maxLength"])),Object(L["b"])(["isLastAttempt"])),setup(e){var t=E(e.isValidateOnLength,e.isResetOnValidation),n=t.isFail,a=t.isSuccess,i=t.isValidating,s=H(),r=s.paddedCountdown,c=s.isPinLocked;return{paddedCountdown:r,isPinLocked:c,isFail:n,isSuccess:a,isValidating:i}}});n("9cba");q.render=f,q.__scopeId="data-v-2b6866dc";var J=q;Object(a["n"])("data-v-7031ca1c");var U={class:"keypad-layout"};function $(e,t,n,i,s,r){var c=Object(a["s"])("key-button");return Object(a["l"])(),Object(a["e"])("div",U,[(Object(a["l"])(!0),Object(a["e"])(a["a"],null,Object(a["r"])(e.keyValues,(function(t){return Object(a["l"])(),Object(a["e"])("div",{class:"key-item",key:t},[Object(a["h"])(c,{class:"primary-btn",disabled:e.isPinLocked,value:t,isCancelHold:e.isValidating,isGlobalKeyHandler:!0,"onKey:pressed":e.onKeyPressed},null,8,["disabled","value","isCancelHold","onKey:pressed"])])})),128))])}function M(e,t,n,i,s,r){var c=Object(a["t"])("touch");return Object(a["w"])((Object(a["l"])(),Object(a["e"])("button",{class:"key-btn",type:"button",onKeydown:t[0]||(t[0]=Object(a["x"])((function(){return e.onRelease&&e.onRelease.apply(e,arguments)}),["enter","space"]))},[Object(a["g"])(Object(a["u"])(e.value),1)],544)),[[c,e.onHold,"hold"],[c,e.onRelease,"release"]])}Object(a["m"])();var G=Object(a["i"])({name:"KeyButton",props:{value:{type:[String,Number],required:!0},pressInterval:{type:Number,default:100},pressEvent:{type:String,default:"key:pressed"},isCancelHold:{type:Boolean,default:!1},isGlobalKeyHandler:{type:Boolean,default:!1}},data(){return{intervalID:0}},mounted(){this.isGlobalKeyHandler&&document.addEventListener("keydown",this.onValueKey)},unmounted(){document.removeEventListener("keydown",this.onValueKey)},methods:{onHold(){var e=this;this.intervalID=setInterval((function(){e.isCancelHold?(clearInterval(e.intervalID),e.intervalID=0):e.$emit(e.pressEvent,e.value)}),this.pressInterval)},onRelease(){this.intervalID?(clearInterval(this.intervalID),this.intervalID=0):this.$emit(this.pressEvent,this.value)},onValueKey(e,t){t="undefined"===typeof t?this:t,e.key!==t.value.toString()||t.$el.disabled||(t.onRelease(),t.$el.focus())}}});n("f011");G.render=M,G.__scopeId="data-v-4b8d3285";var W=G,Y=function(){var e=R(),t=Object(a["b"])((function(){return e.getters.isPinShort}));function n(n,a){a||t.value||e.commit(P.PinReset),t.value&&e.commit(P.PinUpdate,n)}return{pinUpdate:n}},z=Object(a["i"])({name:"Keypad",components:{KeyButton:W},props:{keyValues:{type:Array,default(){return JSON.parse("[1, 2, 3, 4, 5, 6, 7, 8, 9, 0]")}}},setup(){var e=H(),t=e.isPinLocked,n=E(),a=n.isValidating,i=Y(),s=i.pinUpdate;return{isPinLocked:t,isValidating:a,pinUpdate:s}},methods:{onKeyPressed(e){this.pinUpdate(e,this.isValidating)}}});n("8630");z.render=$,z.__scopeId="data-v-7031ca1c";var Q=z,X=Object(a["i"])({name:"App",components:{Display:J,Keypad:Q}});n("6980");X.render=i;var Z=X,ee=n("9a7e"),te=Object(a["c"])(Z).use(ee["a"]).use(F).mount("#app");te.$store.subscribe((function(e,t){document.body.classList.toggle("success",t.isValid),document.body.classList.toggle("error",!!t.failCount)}))},f011:function(e,t,n){"use strict";n("3d59")}});
//# sourceMappingURL=app.8541e242.js.map