(function(e){function t(t){for(var i,c,r=t[0],o=t[1],l=t[2],d=0,p=[];d<r.length;d++)c=r[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],i=!0,r=1;r<n.length;r++){var o=n[r];0!==a[o]&&(i=!1)}i&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},a={app:0},s=[];function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/pin-pad/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=o;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"1e05":function(e,t,n){"use strict";n("989a")},6870:function(e,t,n){},"6a2b":function(e,t,n){"use strict";n("6870")},"8a36":function(e,t,n){"use strict";n("c896")},9735:function(e,t,n){"use strict";n("c71f")},"989a":function(e,t,n){},a2df:function(e,t,n){},a8d7:function(e,t,n){},c4b6:function(e,t,n){"use strict";n("a2df")},c71f:function(e,t,n){},c896:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("7a23"),a=Object(i["e"])("a",{class:"link link--primary source-link",rel:"external",target:"_blank",href:"https://github.com/hqcasanova/pin-pad"}," Source ",-1);function s(e,t,n,s,c,r){var o=Object(i["s"])("app-display"),l=Object(i["s"])("app-keypad");return Object(i["k"])(),Object(i["d"])(i["a"],null,[Object(i["g"])(o,{code:e.code,"valid-length":e.validLength,"is-pin-locked":e.isPinLocked,"is-validating":e.isValidating},null,8,["code","valid-length","is-pin-locked","is-validating"]),Object(i["g"])(l,{"is-disabled":e.isPinLocked,"is-input-blocked":e.isValidating},null,8,["is-disabled","is-input-blocked"]),a],64)}var c=n("5530"),r=function(e){return Object(i["m"])("data-v-e4802c24"),e=e(),Object(i["l"])(),e},o={class:"app-display"},l={class:"app-display__item app-display__title"},u={class:"app-display__status app-display__status--error"},d=r((function(){return Object(i["e"])("strong",{class:"app-display__status app-display__status--success"},"OK",-1)})),p=Object(i["f"])(" PIN verified "),b=Object(i["f"])(" Enter your PIN code "),f={class:"app-display__item app-display__feedback"},v=Object(i["f"])("Checking..."),O=Object(i["f"])("Your PIN is valid");function j(e,t,n,a,s,c){var r=Object(i["s"])("base-digit"),j=Object(i["s"])("pin-row");return Object(i["k"])(),Object(i["d"])("div",o,[Object(i["e"])("h2",l,[e.isFail?(Object(i["k"])(),Object(i["d"])(i["a"],{key:0},[Object(i["e"])("strong",u,Object(i["u"])(e.isPinLocked?"LOCKED":"ERROR"),1),Object(i["f"])(" "+Object(i["u"])(e.isPinLocked?"Keypad disabled":"Wrong PIN"),1)],64)):e.isSuccess?(Object(i["k"])(),Object(i["d"])(i["a"],{key:1},[d,p],64)):(Object(i["k"])(),Object(i["d"])(i["a"],{key:2},[b],64))]),Object(i["e"])("p",f,[e.isValidating?(Object(i["k"])(),Object(i["d"])(i["a"],{key:0},[v],64)):e.isFail&&!e.isPinLocked?(Object(i["k"])(),Object(i["d"])(i["a"],{key:1},[Object(i["f"])(Object(i["u"])(e.isLastAttempt?"Last try remaining":"Please try again"),1)],64)):e.isFail&&e.isPinLocked?(Object(i["k"])(),Object(i["d"])(i["a"],{key:2},[Object(i["f"])(" Please wait "+Object(i["u"])(e.paddedCountdown)+" seconds ",1)],64)):e.isSuccess?(Object(i["k"])(),Object(i["d"])(i["a"],{key:3},[O],64)):(Object(i["k"])(),Object(i["d"])(i["a"],{key:4},[Object(i["f"])("The code must be "+Object(i["u"])(e.validLength)+" characters long",1)],64))]),Object(i["g"])(j,{class:Object(i["j"])(["app-display__item app-display__pin",{"app-display__pin--error":e.isFail&&!e.isValidating,"app-display__pin--loading":e.isValidating||e.isPinLocked}]),"pin-length":e.validLength,value:e.code},{default:Object(i["w"])((function(t){return[Object(i["g"])(r,{"is-visible":e.isCharVisible(t.pinPos),value:t.pinDigit},null,8,["is-visible","value"])]})),_:1},8,["class","pin-length","value"])])}n("a9e3");var h={class:"pin-row"};function y(e,t,n,a,s,c){return Object(i["k"])(),Object(i["d"])("div",h,[(Object(i["k"])(!0),Object(i["d"])(i["a"],null,Object(i["q"])(e.charPositions,(function(t){return Object(i["r"])(e.$slots,"default",{key:t,pinPos:t,pinDigit:e.value[t]},void 0,!0)})),128))])}var g=Object(i["h"])({name:"PinRow",props:{pinLength:{type:Number,required:!0},value:{type:String,default:""}},computed:{charPositions(){var e=[],t=0;for(t;t<this.pinLength;t++)e.push(t);return e}}}),k=(n("9735"),n("6b0d")),m=n.n(k);const P=m()(g,[["render",y],["__scopeId","data-v-3f478a31"]]);var _=P;function L(e,t,n,a,s,c){return Object(i["k"])(),Object(i["d"])("span",{class:Object(i["j"])(["base-digit",{"base-digit--filled":e.isValue&&!e.isVisible,"base-digit--borderless":e.isValue&&e.isVisible,"base-digit--faded":e.isDisabled}])},Object(i["u"])(e.isVisible?e.value:""),3)}var S=Object(i["h"])({name:"BaseDigit",props:{value:{type:String,default:""},isVisible:{type:Boolean,default:!0},isDisabled:{type:Boolean,default:!1}},computed:{isValue(){return this.value.length}}});n("f595");const I=m()(S,[["render",L],["__scopeId","data-v-6206e17b"]]);var V,w=I,C=n("5502"),R=(n("d3b7"),n("25f0"),n("4d90"),{code:"",failCount:-1,validLength:JSON.parse("4"),lockThreshold:JSON.parse("3"),lockTimeout:JSON.parse("10")});(function(e){e["pinUpdate"]="PIN_UPDATE",e["PinSuccess"]="PIN_SUCCESS",e["PinFail"]="PIN_FAIL",e["PinReset"]="PIN_RESET"})(V||(V={}));var N,D={[V.pinUpdate](e,t){e.code=`${e.code}${t}`},[V.PinSuccess](e){e.failCount=0},[V.PinFail](e){-1===e.failCount?e.failCount=1:e.failCount++},[V.PinReset](e){e.code=""}},B=n("1da1"),E=(n("96cf"),JSON.parse("2000")),F="1234";function T(e){return new Promise((function(t,n){setTimeout(e===F?t:n,E)}))}(function(e){e["ValidatePin"]="VALIDATE_PIN",e["UpdatePin"]="UPDATE_PIN",e["ResetPin"]="RESET_PIN"})(N||(N={}));var A={[N.ValidatePin](e){return Object(B["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,i=e.commit,t.prev=1,t.next=4,T(n.code);case 4:i(V.PinSuccess),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](1),i(V.PinFail);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))()},[N.UpdatePin](e,t){var n=e.commit;n(V.pinUpdate,t.toString())},[N.ResetPin](e){var t=e.commit;t(V.PinReset)}},K={isFail(e){return e.failCount>0},isSuccess(e){return 0===e.failCount},isPinShort(e){return e.code.length<e.validLength},isLockFailCount(e){return e.failCount>0&&e.failCount%e.lockThreshold===0},isLastAttempt(e){return e.failCount%e.lockThreshold===e.lockThreshold-1}},U=Object(C["a"])({plugins:[],state:R,mutations:D,actions:A,getters:K});function x(){return U}var J,$=Object(i["p"])(0),q=x(),H=Object(i["b"])((function(){return q.getters.isLockFailCount})),M=q.state.lockTimeout.toString().length;function G(e){$.value=e,J=setInterval((function(){$.value--,0===$.value&&(clearInterval(J),J=0)}),1e3)}var W=function(){var e=Object(i["b"])((function(){return H.value&&$.value>0})),t=Object(i["b"])((function(){return $.value.toString().padStart(M,"0")})),n=function(){Object(i["v"])(H,(function(e){e&&!J&&G(q.state.lockTimeout)}))};return{timerOnFailcount:n,unlockCountdown:Object(i["o"])($),paddedCountdown:t,isPinLocked:e}},Y=Object(i["h"])({name:"AppDisplay",components:{PinRow:_,BaseDigit:w},props:{code:{type:String,required:!0},validLength:{type:Number,required:!0},visibleFromLast:{type:Number,default:0|JSON.parse("1")},isPinLocked:{type:Boolean,default:!1},isValidating:{type:Boolean,default:!1}},computed:Object(c["a"])({},Object(C["b"])(["isLastAttempt","isFail","isSuccess"])),setup(){var e=W(),t=e.paddedCountdown;return{paddedCountdown:t}},methods:{isCharVisible(e){return e>=this.code.length-this.visibleFromLast}}});n("6a2b");const z=m()(Y,[["render",j],["__scopeId","data-v-e4802c24"]]);var Q=z,X={class:"app-keypad"};function Z(e,t,n,a,s,c){var r=Object(i["s"])("base-key");return Object(i["k"])(),Object(i["d"])("div",X,[(Object(i["k"])(!0),Object(i["d"])(i["a"],null,Object(i["q"])(e.keyValues,(function(n){return Object(i["k"])(),Object(i["d"])("div",{class:"app-keypad__item",key:n},[Object(i["g"])(r,{class:"btn btn--primary",disabled:e.isDisabled,value:n,"is-cancel-hold":e.isInputBlocked,"is-global-key-handler":!0,onKeyPressed:t[0]||(t[0]=function(t){return!e.isInputBlocked&&e.pinUpdate(t)})},null,8,["disabled","value","is-cancel-hold"])])})),128))])}function ee(e,t,n,a,s,c){var r=Object(i["t"])("touch");return Object(i["x"])((Object(i["k"])(),Object(i["d"])("button",{class:"base-key",type:"button",onKeydown:t[0]||(t[0]=Object(i["y"])((function(){return e.onRelease&&e.onRelease.apply(e,arguments)}),["enter","space"]))},[Object(i["f"])(Object(i["u"])(e.value),1)],32)),[[r,e.onHold,"hold"],[r,e.onRelease,"release"]])}var te=Object(i["h"])({name:"BaseKey",props:{value:{type:[String,Number],required:!0},pressInterval:{type:Number,default:100},pressEvent:{type:String,default:"key-pressed"},isCancelHold:{type:Boolean,default:!1},isGlobalKeyHandler:{type:Boolean,default:!1}},data(){return{intervalID:0}},mounted(){this.isGlobalKeyHandler&&document.addEventListener("keydown",this.onValueKey.bind(this))},unmounted(){document.removeEventListener("keydown",this.onValueKey)},methods:{onHold(){var e=this;this.intervalID=setInterval((function(){e.isCancelHold?(clearInterval(e.intervalID),e.intervalID=0):e.$emit(e.pressEvent,e.value)}),this.pressInterval)},onRelease(){this.intervalID?(clearInterval(this.intervalID),this.intervalID=0):this.$emit(this.pressEvent,this.value)},onValueKey(e){e.key!==this.value.toString()||this.$el.disabled||(this.onRelease(),this.$el.focus())}}});n("1e05");const ne=m()(te,[["render",ee],["__scopeId","data-v-bfe7035e"]]);var ie=ne,ae=x(),se=Object(i["b"])((function(){return ae.getters.isPinShort})),ce=function(){function e(e){se.value?ae.dispatch(N.UpdatePin,e):ae.dispatch(N.ResetPin)}return{pinUpdate:e}},re=Object(i["h"])({name:"AppKeypad",components:{BaseKey:ie},props:{keyValues:{type:Array,default(){return JSON.parse("[1, 2, 3, 4, 5, 6, 7, 8, 9, 0]")}},isDisabled:{type:Boolean,default:!1},isInputBlocked:{type:Boolean,default:!1}},setup(){var e=ce(),t=e.pinUpdate;return{pinUpdate:t}}});n("8a36");const oe=m()(re,[["render",Z],["__scopeId","data-v-386fef22"]]);var le=oe,ue=x(),de=Object(i["p"])(!1),pe=Object(i["b"])((function(){return ue.state.code.length})),be=function(){var e=function(e){var t=ue.dispatch(N.ValidatePin);de.value=!0,t.finally((function(){e&&ue.dispatch(N.ResetPin),de.value=!1}))},t=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(i["v"])(pe,(function(n){n===ue.state.validLength&&e(t)}))};return{validateOnLength:t,isValidating:Object(i["o"])(de)}},fe=Object(i["h"])({name:"App",components:{AppDisplay:Q,AppKeypad:le},props:{isResetOnValidation:{type:Boolean,default:!0}},computed:Object(c["a"])({},Object(C["c"])(["code","validLength"])),setup(e){var t=be(),n=t.validateOnLength,i=t.isValidating,a=W(),s=a.timerOnFailcount,c=a.isPinLocked;return n(e.isResetOnValidation),s(),{isPinLocked:c,isValidating:i}}});n("c4b6");const ve=m()(fe,[["render",s]]);var Oe=ve,je=n("9a7e"),he=Object(i["c"])(Oe).use(je["a"]).use(U).mount("#app");he.$store.subscribe((function(e,t){document.body.classList.toggle("success",0===t.failCount),document.body.classList.toggle("error",t.failCount>0)}))},f595:function(e,t,n){"use strict";n("a8d7")}});
//# sourceMappingURL=app.157545ce.js.map